ORG 100H
#start=Traffic_Lights.exe#


.MODEL SMALL
.STACK 100H
.DATA     ;XANH-VANG-DO
          ;BA9 876 543 210
R1 DW 0000_001_100_001_100B
R2 DW 0000_001_010_001_010B
R3 DW 0000_100_001_100_001B
R4 DW 0000_000_000_000_000B
PORT EQU 4

ALL_RED EQU 0000_001_001_001_001B

WAIT_3_SECOND_CX EQU 2DH
WAIT_3_SECOND_DX EQU 0C6C0H

WAIT_1_SECOND_CX EQU 0FH
WAIT_1_SECOND_DX EQU 4240H 

.CODE

WAIT_MACRO MACRO T1,T2
    MOV AH,86H
    MOV CX,T1
    MOV DX,T2
    INT 15H
ENDM    

START:

    MOV AX,@DATA
    MOV DS,AX
    
    MOV AX,ALL_RED
    OUT PORT,AX
    WAIT_MACRO WAIT_3_SECOND_CX,WAIT_3_SECOND_DX

    MOV AX,R1
    OUT PORT,AX
    WAIT_MACRO WAIT_3_SECOND_CX,WAIT_3_SECOND_DX
    
    MOV AX,R2
    OUT PORT,AX
    WAIT_MACRO WAIT_1_SECOND_CX,WAIT_1_SECOND_DX
    
    MOV AX,R3
    OUT PORT,AX
    WAIT_MACRO WAIT_3_SECOND_CX,WAIT_3_SECOND_DX
    
    MOV AX,R4
    OUT PORT,AX

END START    
