ORG 100H
#start=Traffic_Lights.exe#

.MODEL SMALL
.STACK 100H
.DATA          
         ;FEDC BA9 876 543 210 
         ;0000 GYR GYR GYR GYR 
    R1 DW 0000_001_100_001_100B ; DI DOC
    R2 DW 0000_001_010_001_010B ; DOC --> VANG
    R3 DW 0000_100_001_100_001B ; DI NGANG
    R4 DW 0000_010_001_010_001B ; NGANG --> VANG
    
    ALL_RED EQU 0000_001_001_001_001B
    PORT EQU 4  ; OUTPUT PORT        
    
    WAIT_3_SEC_CX EQU 2DH
    WAIT_3_SEC_DX EQU 0C6C0H
    
    WAIT_10_SEC_CX EQU 98H
    WAIT_10_SEC_DX EQU 9680H  
    
    THONGBAO DB 'THANKS FOR WATCHING$'
    
.CODE
    
WAIT_MACRO MACRO T1, T2
    MOV AH, 86H  
    MOV CX, T1
    MOV DX, T2
    INT 15H
ENDM
    
    MOV AX, @DATA
    MOV DS, AX  
    
    MOV AX, ALL_RED
    OUT PORT, AX         
    WAIT_MACRO WAIT_3_SEC_CX, WAIT_3_SEC_DX

START:
    
    MOV AX, R1
    OUT PORT, AX
    WAIT_MACRO WAIT_10_SEC_CX, WAIT_10_SEC_DX
    
    MOV AX, R2
    OUT PORT, AX
    WAIT_MACRO WAIT_3_SEC_CX, WAIT_3_SEC_DX
    
    MOV AX, R3
    OUT PORT, AX
    WAIT_MACRO WAIT_10_SEC_CX, WAIT_10_SEC_DX 
    
    MOV AX, R4
    OUT PORT, AX
    WAIT_MACRO WAIT_3_SEC_CX, WAIT_3_SEC_DX    
    
    JMP START

END START

